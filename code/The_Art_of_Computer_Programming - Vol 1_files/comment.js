define(["require","exports","tslib","react","classnames","spectrum/tertiary_link","spectrum/tooltip","comments2/components/comment/separator","comments2/components/comment_avatar","comments2/components/comment_editor/comment_editor","comments2/components/comment_editor/components/post_bar","comments2/components/comment_editor/comment_renderer","prop-types","comments2/l10n"],(function(e,t,n,o,s,a,r,i,m,c,l,d,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),s=n.__importDefault(s),p=n.__importStar(p);var f=function(e,t){var n=t.localization.intl;return o.createElement(l.PostBar,Object.assign({},e,{postLabel:n.formatMessage({id:"GM9O28",defaultMessage:"Save"}),cancelLabel:n.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})}))};function v(e){var t=e.actions,n=e.active,s=e.comment,i=s.revisionInfo,m=s.threadId,c=e.intl,l=i.timestamp?c.formatMessage({id:"TrMn7R",defaultMessage:"On older version ({timestamp})"},{timestamp:c.formatTime(i.timestamp,{day:"numeric",month:"short"})}):c.formatMessage({id:"KwIXAO",defaultMessage:"On older version"});return n&&i.revision?o.createElement(r.Tooltip,{positioning:"above",tooltipContent:c.formatMessage({id:"1d7dxH",defaultMessage:"View version history"})},o.createElement(a.TertiaryLink,{className:"sc-comment-older-version",onClick:function(){return t.onClickOlderInfo(i,m)}},l)):o.createElement("div",{className:"sc-comment-older-version"},l)}function E(e){var t=e.comment,n=e.intl,s=e.showRevisionInfo,a=t.author,r=t.id,i=t.revisionInfo,m=t.threadId,c=t.timestamp;return o.createElement("div",{className:"sc-comment-info"},s&&!i.isCurrent&&r==m?o.createElement(v,Object.assign({},e)):null,o.createElement("div",{className:"sc-comment-author-timestamp"},o.createElement("span",{className:"sc-comment-author"},a.name.display),c.getTime()?o.createElement("span",{className:"sc-comment-timestamp"},u.ago(n,c)):null))}function h(e){var t=e.comment,n=t.id,s=t.revisionInfo,a=t.threadId;return e.showRevisionInfo&&!s.isCurrent&&n==a?o.createElement("div",{className:"sc-comment-info"},o.createElement(v,Object.assign({},e))):null}function g(e){var t=e.comment,n=e.comment.userPermissions,s=n.canEdit,r=n.canDelete,i=e.actions.onDeleted,m=e.isMobile,c=e.active,l=e.onStartEdit,d=e.intl;return!s&&!r||m||!c?null:o.createElement("div",{className:"sc-comment-actions"},s&&o.createElement(a.TertiaryLink,{onClick:function(){return l(t)}},d.formatMessage({id:"WPpsFp",defaultMessage:"Edit"})),s&&r&&o.createElement("span",{className:"sc-comment-actions-separator"},"â€¢"),r&&o.createElement(a.TertiaryLink,{className:"sc-comment-actions-delete",onClick:i},d.formatMessage({id:"iowh4/",defaultMessage:"Delete"})))}f.contextTypes={localization:p.object},t.InlineCommentEditorPostBar=o.memo(f),t.OlderInfo=v,t.ActiveCommentInfo=E,t.InactiveCommentInfo=h,t.CommentActionMenu=g;var M=(function(e){function a(){var t=e.apply(this,arguments)||this;return t.onSave=function(e){t.props.actions.onEdited(e),t.props.onEndEdit()},t.onMentionsQueryUpdated=t.props.actions.onMentionsQueryUpdated,t}return n.__extends(a,e),a.prototype.classNameUtil=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=this.props,a=o.active,r=void 0!==a&&a,i=o.className,m=o.comment.deleted;return s.default.apply(void 0,n.__spreadArrays([i],e,[{"sc-comment-active":r,"sc-comment-deleted":m}]))},Object.defineProperty(a.prototype,"intl",{get:function(){return this.context.localization.intl},enumerable:!0,configurable:!0}),a.prototype.renderDeletedMode=function(){var e=this.props.children;return o.createElement("li",{className:this.classNameUtil()},o.createElement(m.DeletedCommentAvatar,null),o.createElement("div",{className:"sc-comment-content-container"},o.createElement("div",{className:"sc-comment-content"},e,e&&o.createElement(i.Separator,null),o.createElement("span",{className:"sc-comment-text"},this.intl.formatMessage({id:"w9I0zq",defaultMessage:"This comment was deleted."})))))},a.prototype.renderDisplayMode=function(){var e=this.props,t=e.active,s=void 0!==t&&t,a=e.children,r=e.comment,i=r.content,m=r.author,c=r.revisionInfo,l=e.commentAvatarComponent,p=n.__assign(n.__assign({},this.props),{intl:this.intl});return o.createElement("li",{className:this.classNameUtil("sc-comment-renderer")},o.createElement(d.CommentRenderer,{content:i,author:m,commentAvatarComponent:l,annotation:a,revisionInfo:c},(function(e){return o.createElement("div",null,s?o.createElement(E,Object.assign({},p)):o.createElement(h,Object.assign({},p)),e,o.createElement(g,Object.assign({},p)))})))},a.prototype.renderEditMode=function(){var e=this.props,n=e.comment,s=e.mentionsMatches,a=e.onEndEdit;return o.createElement("li",{className:this.classNameUtil("sc-comment-editor","sc-comment-inline-editor")},o.createElement(c.CommentEditor,{author:n.author,content:n.content,postSignalComponent:t.InlineCommentEditorPostBar,onCancel:a,onPost:this.onSave,mentionsMatches:s,onMentionsQueryUpdated:this.onMentionsQueryUpdated,renderBare:!0,shouldFocus:!0}))},a.prototype.render=function(){return this.props.comment.deleted?this.renderDeletedMode():this.props.isEditing?this.renderEditMode():this.renderDisplayMode()},a})(o.PureComponent);t.Comment=M,M.contextTypes={localization:p.object},M.defaultProps={isEditing:!1}}));
//# sourceMappingURL=comment.min.js-vfl95vpjn.map